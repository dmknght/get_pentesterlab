BASE_URL = "https://pentesterlab.com/exercises/"

import mechanize, os

browser = mechanize.Browser()
browser.open(BASE_URL)
course_links = browser.links()
for link in course_links:
	if "exercises" in str(link.url):
		try:
			_url = BASE_URL + "/".join(str(link.url).split("/")[2:-1]) + "/attachments"
			name = link.url.split("/")[2]
			print("Checking %s" %(_url))
			try:
				browser.open(_url)
				for iso_link in browser.links():
					if "iso" in str(iso_link.url):
						os.system("wget %s -O %s.iso" %(iso_link.url, name))
						break
			except:
				pass

		except Exception as error:
			print("Error: %s" %(error))
